<h1>Welcome to Booking!</h1>

<!-- <p>{{ bookingForm2.value | json }}</p>
<p>{{ bookingForm2.pristine | json }}</p>
<p>{{ bookingForm2.dirty | json }}</p>

<form class="example-form" [formGroup]="bookingForm2">
    <mat-form-field class="example-full-width">
        <input 
            type="text" 
            matInput 
            formControlName="dadaEmail"
            placeholder="dadaEmail"
        >
    </mat-form-field>
</form> -->

<!-- <br>
<p>============ SEPARATOR =============</p>
<br> -->

<p>{{ bookingForm.value | json }}</p>
<p>{{ bookingForm.pristine | json }}</p>
<p>{{ bookingForm.dirty | json }}</p>

<form class="example-form" [formGroup]="bookingForm" (ngSubmit)="addBooking()">
    
    <mat-form-field class="example-full-width">
        <input 
            type="text" 
            matInput 
            formControlName="roomId"
            placeholder="Room Id"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="email" 
            matInput 
            formControlName="guestEmail"
            placeholder="my.email@email.com"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <mat-label>Check-in Date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="checkinDate">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="datetime" 
            matInput 
            formControlName="checkoutDate"
            placeholder="Check-out Date"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="text" 
            matInput 
            formControlName="bookingStatus"
            placeholder="Booking status"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="number" 
            matInput 
            formControlName="bookingStatus"
            placeholder="Booking status"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="number" 
            matInput 
            formControlName="bookingAmount"
            placeholder="Booking amount"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="datetime" 
            matInput 
            formControlName="bookingDate"
            placeholder="Booking date"
        >
    </mat-form-field>
    <mat-form-field class="example-full-width">
        <input 
            type="tel" 
            matInput 
            formControlName="mobileNumber"
            placeholder="Mobile number"
        >
    </mat-form-field>

    <div formGroupName="address">
        <mat-accordion class="example-headers-align" multi>
            
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>Address</mat-panel-title>
                </mat-expansion-panel-header>
          
                <mat-form-field class="example-full-width">
                    <input 
                        type="text" 
                        matInput 
                        formControlName="addressLine"
                        placeholder="Addres line"
                    >
                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <input 
                        type="text" 
                        matInput 
                        formControlName="addressLine2"
                        placeholder="Address line 2"
                    >
                </mat-form-field>
           
                <mat-form-field class="example-full-width">
                    <input 
                        type="text" 
                        matInput 
                        formControlName="city"
                        placeholder="City"
                    >
                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <input 
                        type="text" 
                        matInput 
                        formControlName="state"
                        placeholder="State"
                    >
                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <input 
                        type="text" 
                        matInput 
                        formControlName="country"
                        placeholder="Country"
                    >
                </mat-form-field>

            </mat-expansion-panel>
            
          </mat-accordion>
    </div>

    <!-- guest array -->
    <!-- https://stackoverflow.com/questions/57271347/how-to-make-a-dynamic-form-in-angular-with-an-ngfor -->
    <div>
        <button mat-raised-button color="primary" type="button" (click)="addGuest()">Add Guest</button>
    </div>
    <div formArrayName="guests">
        <div *ngFor="let guest of guests.controls; let i=index">
            <div [formGroupName]="i">
                <mat-form-field>
                    <input
                        type="text"
                        matInput
                        formControlName="name"
                        placeholder="Guest Name"
                    >
                </mat-form-field>
                <mat-form-field>
                    <input
                        type="email"
                        matInput
                        formControlName="email"
                        placeholder="Provide and Email"
                    >
                </mat-form-field>
                <mat-form-field>
                    <input
                        type="number"
                        matInput
                        formControlName="age"
                        placeholder="Guest Age"
                    >
                </mat-form-field>
            </div>
        </div>
    </div>

    <button mat-raised-button color="primary" type="submit">Book Room</button>
</form>
